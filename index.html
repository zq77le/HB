<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>赛赛生日快乐🎉</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">
<style>
  html, body {
    margin: 0;
    padding: 0;
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(to bottom, #0d0d3f, #4b0082);
    color: white;
    overflow-y: auto;
    height: 100%;
    position: relative;
  }

  h1 {
    font-size: 3em;
    text-align: center;
    margin-top: 20px;
  }

  #playBtn {
    display: block;
    margin: 20px auto;
    font-size: 1.2em;
    padding: 10px 20px;
    border-radius: 12px;
    border: 2px solid white;
    background: rgba(255,255,255,0.2);
    color: white;
    cursor: pointer;
  }

  #playBtn:hover {
    background: rgba(255,255,255,0.3);
    transform: scale(1.1);
    transition: all 0.3s;
  }

  #letter {
    margin: 20px auto;
    max-width: 700px;
    background: rgba(255,255,255,0.1);
    padding: 25px;
    border-radius: 15px;
    font-size: 1.2em;
    text-align: left;
    white-space: pre-line;
    display: none;
  }

  /* 流动闪烁星星 */
  .star {
    position: absolute;
    width: 2px;
    height: 2px;
    background-color: white;
    border-radius: 50%;
    opacity: 0.8;
    animation: twinkle 2s infinite alternate;
  }

  /* 流星 */
  .shooting-star {
    position: absolute;
    width: 3px;
    height: 3px;
    background: linear-gradient(45deg, #ff0, #f0f, #0ff);
    border-radius: 50%;
    box-shadow: 0 0 10px #fff;
  }

  @keyframes twinkle {
    0% { opacity: 0.2; }
    50% { opacity: 1; }
    100% { opacity: 0.2; }
  }

  /* 生日蛋糕 */
  .cake {
    position: relative;
    width: 150px;
    margin: 30px auto;
    display: none;
  }

  .cake-base {
    width: 100%;
    height: 60px;
    background: #ff9999;
    border-radius: 0 0 10px 10px;
    position: relative;
    z-index: 1;
  }

  .cake-top {
    width: 100px;
    height: 40px;
    background: #ff6666;
    border-radius: 10px 10px 0 0;
    position: absolute;
    top: -40px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 2;
  }

  .candle {
    width: 8px;
    height: 20px;
    background: #fff;
    position: absolute;
    top: -60px;
    border-radius: 2px;
  }

  .candle .flame {
    width: 6px;
    height: 10px;
    background: radial-gradient(circle, #ff0 0%, #f90 70%, #f00 100%);
    position: absolute;
    top: -10px;
    left: 1px;
    border-radius: 50%;
    animation: flicker 0.5s infinite alternate;
  }

  @keyframes flicker {
    0% { transform: scale(1); opacity:1; }
    50% { transform: scale(1.3); opacity:0.8; }
    100% { transform: scale(1); opacity:1; }
  }

  /* 彩色小火花 */
  .spark {
    position: absolute;
    width: 4px;
    height: 4px;
    border-radius: 50%;
    opacity: 0.8;
  }
</style>
</head>
<body>

<h1>🎂 生日快乐！ 🎉</h1>
<p style="text-align:center;">点击下面按钮播放音乐并查看祝福信💌🎶</p>

<button id="playBtn">🔊 播放音乐</button>

<div id="aplayer"></div>
<div id="letter"></div>

<!-- 生日蛋糕 -->
<div class="cake" id="cake">
  <div class="cake-base"></div>
  <div class="cake-top"></div>
  <!-- 3 根蜡烛整齐居中 -->
  <div class="candle" style="left:25%;"><div class="flame"></div></div>
  <div class="candle" style="left:50%;"><div class="flame"></div></div>
  <div class="candle" style="left:75%;"><div class="flame"></div></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>
<script>
const playBtn = document.getElementById('playBtn');
const letter = document.getElementById('letter');
const cake = document.getElementById('cake');

const message = `赛赛，生日快乐！🎉🎂
我们是在《光遇》里认识的，然后开始我们越来越了解对方，从那一刻起，你就成了我生命里特别的存在。
你总是为别人着想，善良、温柔，会唱歌、画画，写字 还亲手做手链、项链送给我，每一次都让我感动又开心。 对我来说，你就像在远方的家人一样重要，就像妹妹一样亲近。  

每次和你打电话、聊天、打游戏、唱歌 我都觉得很安心、很开心，好像所有烦恼都离我远去了。 我知道你有时候也会心情不好，有烦恼却不想立刻说出来，但我想让你知道无论你开心还是不开心，我都会在你身边陪你，不只是今天，而是每一天。只要你需要，我就一直在。你永远是我最好的好朋友、第一名💛  

今年的生日礼物你老是说贵！这就是一年一次你的生日我还是希望你收到礼物后会喜欢。当然如果不满意，我们还可以再买别的哈哈哈哈  

明年我更期待和你见面，一起拍好多好多照片，去好玩的地方，吃好吃的，留下美好的回忆和照片视频。  

希望你也能多为自己着想，把自己照顾得好好的，因为你值得最好的。 无论别人怎么否定你，在我心里，你永远都是最棒的！你在我心里永远是最特别的朋友，像家人一样，我会一直珍惜我们的友情。  

最后，祝就像我家人、妹妹一样的赛赛——生日快乐！愿你每天都像今天一样被温柔包围，幸福满满💫

—— 你的好朋友`;

const ap = new APlayer({
  element: document.getElementById('aplayer'),
  showlrc: false,
  fixed: true,
  mini: true,
  audio: [
    {
      name: "Happy Birthday",
      artist: "8bite",
      url: "https://res.cloudinary.com/dt3tc3qjw/video/upload/v1759328043/Happy_Birthday_uwtecg.mp3",
      cover: "https://res.cloudinary.com/dt3tc3qjw/image/upload/v1759328695/ogsv4iCeNBzAlEAaTgAJAFXkEfN4sHAiTAIAiA_tplv-dy-aweme-images_q75_copy_lyfldl.jpg"
    }
  ]
});

let isPlaying = false;

playBtn.addEventListener('click', () => {
  if(!isPlaying){
    ap.play();
    isPlaying = true;
    playBtn.textContent = "⏸ 暂停音乐";
    letter.style.display = "block";
    typeWriter(letter, message, 0);
    startStarsFlow();
    startShootingStars();
  } else {
    ap.pause();
    isPlaying = false;
    playBtn.textContent = "🔊 播放音乐";
  }
});

// 文字逐字显示
function typeWriter(element, text, index){
  if(index < text.length){
    element.innerHTML += text.charAt(index);
    setTimeout(()=> typeWriter(element, text, index+1), 20);
  } else {
    cake.style.display = "block";
    startCakeSparks();
  }
}

// 流动星星
function startStarsFlow(){
  setInterval(() => {
    let star = document.createElement('div');
    star.classList.add('star');
    star.style.left = Math.random() * window.innerWidth + 'px';
    star.style.top = window.innerHeight + 'px';
    let size = 1 + Math.random()*2;
    star.style.width = size + 'px';
    star.style.height = size + 'px';
    let duration = 5 + Math.random()*5;
    document.body.appendChild(star);
    star.animate(
      [
        { transform: `translateY(0)` },
        { transform: `translateY(-${window.innerHeight + 50}px)` }
      ],
      { duration: duration*1000, easing: 'linear' }
    ).onfinish = () => star.remove();
  }, 200);
}

// 流星效果
function startShootingStars(){
  setInterval(() => {
    let star = document.createElement('div');
    star.classList.add('shooting-star');
    let startX = Math.random() * window.innerWidth;
    let startY = Math.random() * window.innerHeight / 2;
    star.style.left = startX + 'px';
    star.style.top = startY + 'px';
    let endX = startX + (50 + Math.random()*150);
    let endY = startY + (50 + Math.random()*150);
    document.body.appendChild(star);

    star.animate(
      [
        { transform: `translate(0,0)`, opacity:1 },
        { transform: `translate(${endX-startX}px,${endY-startY}px)`, opacity:0 }
      ],
      { duration: 1000 + Math.random()*1000, easing: 'ease-out' }
    ).onfinish = () => star.remove();
  }, 1500);
}

// 蛋糕火花
function startCakeSparks(){
  setInterval(() => {
    let spark = document.createElement('div');
    spark.classList.add('spark');
    spark.style.backgroundColor = `hsl(${Math.random()*360}, 100%, 70%)`;
    spark.style.left = (cake.offsetLeft + 70 + Math.random()*20 - 10) + 'px';
    spark.style.top = (cake.offsetTop - 10) + 'px';
    document.body.appendChild(spark);

    let dx = (Math.random()*40 - 20);
    let dy = -(20 + Math.random()*30);

    spark.animate(
      [
        { transform: `translate(0,0)`, opacity:1 },
        { transform: `translate(${dx}px,${dy}px)`, opacity:0 }
      ],
      { duration: 1000 + Math.random()*500, easing: 'ease-out' }
    ).onfinish = () => spark.remove();
  }, 200);
}
</script>
</body>
</html>


