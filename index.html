<script>
  document.addEventListener('DOMContentLoaded', function () {
    const music = document.getElementById('bg-music');
    const musicBtn = document.getElementById('musicBtn');
    const letterBtn = document.getElementById('letterBtn');
    const letter = document.getElementById('letter');
    const status = document.getElementById('status');

    let isPlaying = false; // 追踪音乐状态

    musicBtn.addEventListener('click', async () => {
      try {
        if (!isPlaying) {
          music.muted = false;
          await music.play(); // 只调用一次 play
          isPlaying = true;
          musicBtn.textContent = '⏸ 暂停音乐';
          letterBtn.style.display = 'inline-block';
          status.textContent = '正在播放音乐 🎵';
        } else {
          music.pause();
          isPlaying = false;
          musicBtn.textContent = '🔊 开启音乐';
          status.textContent = '音乐已暂停';
        }
      } catch (err) {
        console.error('播放失败:', err);
        status.textContent = '播放失败：' + err.name;
      }
    });

    letterBtn.addEventListener('click', () => {
      letter.style.display = 'block';
      letterBtn.style.display = 'none';
    });
  });
</script>

